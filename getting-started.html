<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia Site Renderer 1.8.1 from src/site/markdown/getting-started.md at 2021-08-26
 | Rendered using Apache Maven Fluido Skin 1.7
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="Date-Revision-yyyymmdd" content="20210826" />
    <meta http-equiv="Content-Language" content="en" />
    <title>BlackLab Core &#x2013; Getting Started</title>
    <link rel="stylesheet" href="./css/apache-maven-fluido-1.7.min.css" />
    <link rel="stylesheet" href="./css/site.css" />
    <link rel="stylesheet" href="./css/print.css" media="print" />
    <script type="text/javascript" src="./js/apache-maven-fluido-1.7.min.js"></script>
<link href='http://fonts.googleapis.com/css?family=Nunito:300' rel='stylesheet' type='text/css' />
  </head>
  <body class="topBarDisabled">
    <div class="container-fluid">
      <div id="banner">
        <div class="pull-left"><a href="http://www.ivdnt.org/" id="bannerLeft"><img src="images/logo_2_ivd-nt_transparant.png"  alt="Dutch Language Institute (INT)"/></a></div>
        <div class="pull-right"><a href="BlackLab/" id="bannerRight"><img src="images/logo-blacklab.png"  alt="BlackLab"/></a></div>
        <div class="clear"><hr/></div>
      </div>

      <div id="breadcrumbs">
        <ul class="breadcrumb">
      <li class=""><a href="http://www.ivdnt.org/" class="externalLink" title="INT">INT</a><span class="divider">/</span></li>
      <li class=""><a href="index.html" title="BlackLab">BlackLab</a><span class="divider">/</span></li>
    <li class="active ">Getting Started</li>
        <li id="publishDate" class="pull-right"><span class="divider">|</span> Last Published: 2021-08-26</li>
          <li id="projectVersion" class="pull-right">Version: 2.2.0-SNAPSHOT</li>
        </ul>
      </div>
      <div class="row-fluid">
        <div id="leftColumn" class="span2">
          <div class="well sidebar-nav">
    <ul class="nav nav-list">
      <li class="nav-header">BlackLab</li>
    <li><a href="index.html" title="Introduction"><span class="none"></span>Introduction</a></li>
    <li><a href="learn.html" title="Learn"><span class="icon-chevron-down"></span>Learn</a>
    <ul class="nav nav-list">
    <li class="active"><a href="#"><span class="none"></span>Getting Started</a></li>
    <li><a href="corpus-query-language.html" title="Corpus Query Language"><span class="none"></span>Corpus Query Language</a></li>
    <li><a href="blacklab-server-overview.html" title="BlackLab Server overview"><span class="none"></span>BlackLab Server overview</a></li>
    <li><a href="configuration-files.html" title="Configuration files"><span class="none"></span>Configuration files</a></li>
    <li><a href="blacklab-server-different-languages.html" title="Using BlackLab Server from different languages"><span class="none"></span>Using BlackLab Server from different languages</a></li>
    <li><a href="indexing-with-blacklab.html" title="Indexing with BlackLab"><span class="none"></span>Indexing with BlackLab</a></li>
    <li><a href="add-input-format.html" title="Add An Input Format"><span class="none"></span>Add An Input Format</a></li>
    <li><a href="improve-search-speed.html" title="Improve Search Speed"><span class="none"></span>Improve Search Speed</a></li>
    <li><a href="apidocs/index.html" title="API reference"><span class="none"></span>API reference</a></li>
    <li><a href="file-formats.html" title="File formats"><span class="none"></span>File formats</a></li>
    </ul>
</li>
    <li><a href="downloads.html" title="Downloads"><span class="none"></span>Downloads</a></li>
    <li><a href="faq.html" title="FAQ"><span class="none"></span>FAQ</a></li>
    <li><a href="changelog.html" title="Change Log"><span class="none"></span>Change Log</a></li>
    <li><a href="roadmap.html" title="Road Map"><span class="none"></span>Road Map</a></li>
    <li><a href="newsletter.html" title="Newsletter"><span class="none"></span>Newsletter</a></li>
      <li class="nav-header">Project Documentation</li>
    <li><a href="project-info.html" title="Project Information"><span class="icon-chevron-right"></span>Project Information</a></li>
    <li><a href="project-reports.html" title="Project Reports"><span class="icon-chevron-right"></span>Project Reports</a></li>
</ul>
          <hr />
          <div id="poweredBy">
            <div class="clear"></div>
            <div class="clear"></div>
            <div class="clear"></div>
            <div class="clear"></div>
<a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy"><img class="builtBy" alt="Built by Maven" src="./images/logos/maven-feather.png" /></a>
            </div>
          </div>
        </div>
        <div id="bodyColumn"  class="span10" >
<h1>Getting Started</h1>
<p>There&#x2019;s <a href="blacklab-in-action.html">several examples online</a> of what you can do with BlackLab.</p>
<p>To start searching your own data, you&#x2019;ll need to:</p>
<ul>

<li><a href="#server-or-core">Choose between BlackLab Server and Core</a><br /></li>
<li><a href="#getting-blacklab">Getting BlackLab</a><br /></li>
<li><a href="#preparing-your-data">Prepare your data</a><br /></li>
<li><a href="#corpus-search-application">Corpus search application</a><br /></li>
<li><a href="#write-a-simple-blacklab-application">Write a simple application</a><br /></li>
</ul>
<p>Let&#x2019;s go over these one by one.</p>
<p><a name="server-or-core" id="server-or-core"></a></p>
<div class="section">
<h2><a name="Server_or_Core.3F"></a>Server or Core?</h2>
<p>The web service, BlackLab Server, can be used from any programming language and offers a simple REST interface. The Java library offers the most flexibility, but it does mean you have to use a language that runs on the JVM (e.g. Java, Scala, Kotlin, etc.). Note that you will need a Java SE 8 compatible JVM to use the latest BlackLab versions.</p>
<p>For now, this guide will focus on BlackLab Core and Java. For more information on BlackLab Server, see this <a href="blacklab-server-overview.html">overview</a>.</p>
<p>First you need to get the BlackLab library. The simplest way is to let Maven download it automatically from the Central Repository, but you can also download a prebuilt binary, and it&#x2019;s trivial to build it yourself.</p>

<blockquote>
<b>Note to MacOS users</b>: Dirk Roorda at DANS wrote a detailed guide for installing and indexing data on MacOS. It's available <a class="externalLink" href="https://github.com/Dans-labs/clariah-gm/blob/master/blacklab/install.md">here</a>.
</blockquote>

<p><a name="getting-blacklab" id="getting-blacklab"></a></p></div>
<div class="section">
<h2><a name="Getting_BlackLab"></a>Getting BlackLab</h2>
<div class="section">
<h3><a name="Maven_Central"></a>Maven Central</h3>
<p>BlackLab is in the Maven Central Repository, so you should be able to simply <a href="dependency-info.html">add it to your build tool</a>. If you&#x2019;re not sure what version to use, see the <a href="downloads.html">downloads</a> or <a href="changelog.html">changelog</a> pages.</p></div>
<div class="section">
<h3><a name="Downloading_a_prebuilt_binary"></a>Downloading a prebuilt binary</h3>
<p>BlackLab Core consists of a JAR and a set of required libraries. See the <a class="externalLink" href="https://github.com/INL/BlackLab/releases/">GitHub releases page</a> and choose a jar-with-libs download. The latter one may also contain development versions you can try out.</p>
<p>BlackLab Server only consists of a WAR file that includes everything. You could even unzip this WAR file to obtain the included BlackLab JAR and zip files if you needed to for some reason.</p></div>
<div class="section">
<h3><a name="Building_from_source"></a>Building from source</h3>
<p>If you want the very latest version (the &#x201c;dev&#x201d; branch) of BlackLab, you can easily build it from source code.</p>
<p>First, you need to download the source code from GitHub. You can download it from there in a .zip file (be sure to select the dev branch before doing so), but a better way to get it is by cloning it using Git. <a class="externalLink" href="https://git-scm.com/book/en/v2/Getting-Started-Installing-Git">Install a Git client</a> (we&#x2019;ll give command line examples here, but it should translate easily to GUI clients like TortoiseGit), change to a directory where you keep your projects, and clone BlackLab:</p>

<div>
<div>
<pre class="source">git clone git://github.com/INL/BlackLab.git
</pre></div></div>

<p>Git will download the project and place it in a subdirectory &#x201c;BlackLab&#x201d;. Now switch to the dev branch:</p>

<div>
<div>
<pre class="source">git checkout dev
</pre></div></div>

<p>Install a recent JDK (Java Development Kit). If you&#x2019;re on Linux, you can use your package manager to do this (OpenJDK is fine too). Note that you will need at least JDK version 8 (i.e. openjdk-1.8.0) to use the latest BlackLab versions.</p>
<p>BlackLab is built using <a class="externalLink" href="http://maven.apache.org/">Maven</a>, a popular Java build tool. <a class="externalLink" href="https://maven.apache.org/guides/getting-started/maven-in-five-minutes.html">Install Maven</a> (use your package manager if on Linux), change into the BlackLab directory, and build the library:</p>

<div>
<div>
<pre class="source">mvn install
</pre></div></div>

<p>(&#x201c;install&#x201d; refers to the fact that the library is &#x201c;installed&#x201d; to your private Maven repository after it is built)</p>
<p>After a lot of text output, it should say &#x201c;BUILD SUCCESS&#x201d; and the BlackLab JAR library should be under core/target/blacklab-VERSION.jar (where VERSION is the current BlackLab version, i.e. &#x201c;1.7-SNAPSHOT&#x201d;; SNAPSHOT means it&#x2019;s not an official release, by the way). The BlackLab Server WAR will be in server/target/blacklab-server-VERSION.war.</p>
<p>NOTE: If you want to use BlackLab Server and <a class="externalLink" href="https://github.com/INL/corpus-frontend/">BlackLab AutoSearch</a> (our search application), you&#x2019;ll need an application server like Apache Tomcat too. Also available via package manager in Linux. After installation, find the &#x201c;webapps&#x201d; directory (e.g. /var/lib/tomcat/webapps/, but may depend on distribution) and copy the WAR file to it. It should be extracted by Tomcat automatically. For full installation and configuration instructions, see <a href="blacklab-server-overview.html">BlackLab Server overview</a>.</p>
<p><a name="preparing-your-data" id="preparing-your-data"></a></p></div></div>
<div class="section">
<h2><a name="Preparing_your_data"></a>Preparing your data</h2>
<p>In order to search your data using BlackLab, it needs to be in a supported format, and it needs to be indexed by BlackLab.</p>
<div class="section">
<h3><a name="Supported_formats"></a>Supported formats</h3>
<p>BlackLab supports a number of input formats, but the most well-known are <a class="externalLink" href="http://www.tei-c.org/index.xml">TEI</a> (Text Encoding Initiative) and <a class="externalLink" href="http://proycon.github.io/folia/">FoLiA</a> (Format for Linguistic Annotation). These are both XML formats. If your data is not already in one of the supported formats, you need to convert it. (see the next section if you want to use a test dataset instead of your own)</p>
<p>NOTE: BlackLab needs <i>tokenized</i> data files as input. That means the word boundaries have already been determined and BlackLab can just index each word as it parses the input file.</p>
<p>One way to convert your data is using our tool <a class="externalLink" href="https://github.com/INL/OpenConvert">OpenConvert</a>, which can generate TEI or FoLiA from txt, doc(x) or html files, among others. After conversion, you can tag the files using a tool such as <a class="externalLink" href="http://ilk.uvt.nl/frog/">Frog</a>.</p>
<p>A <a class="externalLink" href="http://openconvert.clarin.inl.nl/">web-based user interface</a> for converting and tagging (Dutch) input files is available. You will need a <a class="externalLink" href="https://user.clarin.eu/user">CLARIN.eu account</a> (<a class="externalLink" href="https://www.clarin.eu/content/clarin-identity-provider">more information</a>).</p></div>
<div class="section">
<h3><a name="Testing_with_the_Brown_corpus"></a>Testing with the Brown corpus</h3>
<p>If you can&#x2019;t use your own data yet, we&#x2019;ve provided a <a class="externalLink" href="https://github.com/INL/BlackLab/wiki/brownCorpus.lemmatized.xml.zip">tokenized, annotated TEI version of the Brown corpus</a> for you to test with.</p>
<p>The <a class="externalLink" href="http://en.wikipedia.org/wiki/Brown_Corpus" title="http://en.wikipedia.org/wiki/Brown_Corpus">Brown corpus</a> is a corpus compiled in the 1960s by <a class="externalLink" href="http://archive.org/details/BrownCorpus">Nelson Francis and Henry Kucera</a> at Brown University. It is small by today&#x2019;s standard (500 documents, 1M words). It was converted to TEI format by <a class="externalLink" href="http://users.ox.ac.uk/~lou/">Lou Burnard</a>. It is available from archive.org under the <a class="externalLink" href="http://creativecommons.org/licenses/by-nc/3.0/">CC-BY-NC 3.0</a> license, but we&#x2019;ve created our own version which includes lemmata. (Please note that we didn&#x2019;t check the lemmatization, and it probably contains errors - useful for testing purposes only!)</p></div>
<div class="section">
<h3><a name="Indexing_data"></a>Indexing data</h3>
<p>Get the blacklab JAR and the required libraries (see above). The libraries should be in a directory called &#x201c;lib&#x201d; that&#x2019;s in the same directory as the BlackLab JAR (or elsewhere on the classpath).</p>
<p>Start the IndexTool without parameters for help information:</p>

<div>
<div>
<pre class="source">java -cp &quot;blacklab.jar&quot; nl.inl.blacklab.tools.IndexTool
</pre></div></div>

<p>(this assumes blacklab.jar and the lib subdirectory containing required libraries are located in the current directory; if not, prefix it with the correct directory)</p>
<p>(if you&#x2019;re on Windows, replace the classpath separator colon (:) with a semicolon (;))</p>
<p>We want to create a new index, so we need to supply an index directory, input file(s) and an input format:</p>

<div>
<div>
<pre class="source">java -cp &quot;blacklab.jar&quot; nl.inl.blacklab.tools.IndexTool create INDEX_DIR INPUT_FILES FORMAT
</pre></div></div>

<p>If you specify a directory as the INPUT_FILES, it will be scanned recursively. You can also specify a file glob (such as *.xml) or a single file. If you specify a .zip or .tar.gz file, BlackLab will automatically index its contents.</p>
<p>For example, if you have TEI data in /tmp/my-tei/ and want to create an index as a subdirectory of the current directory called &#x201c;test-index&#x201d;, run the following command:</p>

<div>
<div>
<pre class="source">java -cp &quot;blacklab.jar&quot; nl.inl.blacklab.tools.IndexTool create test-index /tmp/my-tei/ tei
</pre></div></div>

<p>Your data is indexed and placed in a new BlackLab index in the &#x201c;test-index&#x201d; directory.</p>
<p>Please note that if you&#x2019;re indexing large files, you should <a class="externalLink" href="https://docs.oracle.com/cd/E15523_01/web.1111/e13814/jvm_tuning.htm#PERFM161">give java more than the default heap memory</a>, using the <tt>-Xmx</tt> option. For really large files, and if you have the memory, you could use <tt>-Xmx 6G</tt>, for example.</p>
<p>See also:</p>
<ul>

<li><a href="how-to-configure-indexing.html">Adding a new input format</a> (if your format isn&#x2019;t supported yet and you don&#x2019;t want to convert)</li>
<li><a href="indexing-with-blacklab.html">Indexing in detail</a></li>
</ul></div>
<div class="section">
<h3><a name="Testing_your_index"></a>Testing your index</h3>
<p>BlackLab Core includes a very basic command-based query tool useful for testing and debugging. To query the index you just created using this tool, type:</p>

<div>
<div>
<pre class="source">java -cp &quot;blacklab.jar&quot; nl.inl.blacklab.tools.QueryTool test-index
</pre></div></div>

<p>The query tool supports several query languages, but it will start in CorpusQL mode. A few hints:</p>
<ul>

<li>Enclose each word between double quotes: &#x201c;the&#x201d; &#x201c;egg&#x201d; searches for &#x201c;the&#x201d; followed by &#x201c;egg&#x201d;</li>
<li>You can user regular expressions: &#x201c;.*g&#x201d; searches for words ending with &#x2018;g&#x2019;</li>
<li>If you want to get more of a feel for what kinds of matches were found, try grouping by matched text using the command &#x201c;group match&#x201d;. Then, if you want to view one of the groups, use &#x201c;group <i>n</i>&#x201d;.</li>
</ul>
<p>Type &#x201c;help&#x201d; to see a list of commands.</p>
<p>See also:</p>
<ul>

<li><a href="query-tool.html">Using the query tool</a></li>
<li><a href="corpus-query-language.html">Corpus Query Language</a></li>
</ul>
<p><a name="corpus-search-application" id="corpus-search-application"></a></p></div></div>
<div class="section">
<h2><a name="Corpus_search_application"></a>Corpus search application</h2>
<p><a class="externalLink" href="https://github.com/INL/corpus-frontend/">BlackLab AutoSearch</a> is our corpus search application. It is easy to install; see the GitHub page for instructions.</p>
<p><img src="images/corpus-frontend.png" alt="Screenshot of corpus-frontend" /></p>
<p><a name="write-a-simple-blacklab-application" id="write-a-simple-blacklab-application"></a></p></div>
<div class="section">
<h2><a name="Write_a_simple_BlackLab_application"></a>Write a simple BlackLab application</h2>
<p>Finally, let&#x2019;s look at an example Java application.</p>
<p>Here&#x2019;s the basic structure of a BlackLab search application, to give you an idea of where to look in the source code and documentation (note that we leave nl.inl.blacklab out of the package names for brevity):</p>
<ol style="list-style-type: decimal">

<li>Call BlackLab.open() to instantiate a BlackLabIndex object. This provides the main BlackLab API.</li>
<li>Construct a TextPattern structure that represents your query. You may want to do this from a query parser, or use one of the query parsers supplied with BlackLab (CorpusQueryLanguageParser, &#x2026;).</li>
<li>Call the BlackLabIndex.find() method to execute the TextPattern and return a Hits object. (Internally, this translates the TextPattern into a Lucene SpanQuery, executes it, and collects the hits. Each of these steps may also be done manually if you wish to have more control over the process)</li>
<li>Sort or group the results, using Hits.sort() or Hits.group() and a HitProperty object to indicate the sorting/grouping criteria.</li>
<li>Select a few of your Hits to display by calling Hits.window().</li>
<li>Loop over the HitsWindow and display each hit.</li>
<li>Close the BlackLabIndex object.</li>
</ol>
<p>The above in code:</p>

<div>
<div>
<pre class="source">// Open your index
try (BlackLabIndex index = BlackLab.open(new File(&quot;/home/zwets/testindex&quot;))) {
    String corpusQlQuery = &quot; \&quot;the\&quot; [pos=\&quot;adj.*\&quot;] \&quot;brown\&quot; \&quot;fox\&quot; &quot;;

    // Parse your query to get a TextPattern
    TextPattern pattern = CorpusQueryLanguageParser.parse(corpusQlQuery);

    // Execute the TextPattern
    Hits hits = index.find(pattern);

    // Sort the hits by the words to the left of the matched text
    HitProperty sortProperty = new HitPropertyLeftContext(index, index.annotation(&quot;word&quot;));
    hits = hits.sort(sortProperty);

    // Limit the results to the ones we want to show now (i.e. the first page)
    Hits window = hits.window(0, 20);

    // Iterate over window and display the hits
    Concordances concs = hits.concordances(ContextSize.get(5));
    for (Hit hit: window) {
        Concordance conc = concs.get(hit);
        // Strip out XML tags for display.
        String left = XmlUtil.xmlToPlainText(conc.left);
        String hitText = XmlUtil.xmlToPlainText(conc.hit);
        String right = XmlUtil.xmlToPlainText(conc.right);
        System.out.printf(&quot;%45s[%s]%s\n&quot;, left, hitText, right);
    }

}
</pre></div></div>

<p>See also:</p>
<ul>

<li><a href="apidocs/index.html">API reference</a></li>
<li><a href="example-application.html">The included example application</a></li>
</ul></div>
        </div>
      </div>
    </div>
    <hr/>
    <footer>
      <div class="container-fluid">
        <div class="row-fluid">
            <p>Copyright &copy;2021
<a href="https://www.ivdnt.org/">Instituut voor Nederlandse Taal (INT)</a>.
All rights reserved.</p>
        </div>
      </div>
    </footer>
  </body>
</html>
