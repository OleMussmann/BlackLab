<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia Site Renderer 1.8.1 from src/site/markdown/faq.md at 2021-08-26
 | Rendered using Apache Maven Fluido Skin 1.7
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="Date-Revision-yyyymmdd" content="20210826" />
    <meta http-equiv="Content-Language" content="en" />
    <title>BlackLab Core &#x2013; Frequently Asked Questions</title>
    <link rel="stylesheet" href="./css/apache-maven-fluido-1.7.min.css" />
    <link rel="stylesheet" href="./css/site.css" />
    <link rel="stylesheet" href="./css/print.css" media="print" />
    <script type="text/javascript" src="./js/apache-maven-fluido-1.7.min.js"></script>
<link href='http://fonts.googleapis.com/css?family=Nunito:300' rel='stylesheet' type='text/css' />
  </head>
  <body class="topBarDisabled">
    <div class="container-fluid">
      <div id="banner">
        <div class="pull-left"><a href="http://www.ivdnt.org/" id="bannerLeft"><img src="images/logo_2_ivd-nt_transparant.png"  alt="Dutch Language Institute (INT)"/></a></div>
        <div class="pull-right"><a href="BlackLab/" id="bannerRight"><img src="images/logo-blacklab.png"  alt="BlackLab"/></a></div>
        <div class="clear"><hr/></div>
      </div>

      <div id="breadcrumbs">
        <ul class="breadcrumb">
      <li class=""><a href="http://www.ivdnt.org/" class="externalLink" title="INT">INT</a><span class="divider">/</span></li>
      <li class=""><a href="index.html" title="BlackLab">BlackLab</a><span class="divider">/</span></li>
    <li class="active ">Frequently Asked Questions</li>
        <li id="publishDate" class="pull-right"><span class="divider">|</span> Last Published: 2021-08-26</li>
          <li id="projectVersion" class="pull-right">Version: 2.2.0-SNAPSHOT</li>
        </ul>
      </div>
      <div class="row-fluid">
        <div id="leftColumn" class="span2">
          <div class="well sidebar-nav">
    <ul class="nav nav-list">
      <li class="nav-header">BlackLab</li>
    <li><a href="index.html" title="Introduction"><span class="none"></span>Introduction</a></li>
    <li><a href="learn.html" title="Learn"><span class="icon-chevron-down"></span>Learn</a>
    <ul class="nav nav-list">
    <li><a href="getting-started.html" title="Getting Started"><span class="none"></span>Getting Started</a></li>
    <li><a href="corpus-query-language.html" title="Corpus Query Language"><span class="none"></span>Corpus Query Language</a></li>
    <li><a href="blacklab-server-overview.html" title="BlackLab Server overview"><span class="none"></span>BlackLab Server overview</a></li>
    <li><a href="configuration-files.html" title="Configuration files"><span class="none"></span>Configuration files</a></li>
    <li><a href="blacklab-server-different-languages.html" title="Using BlackLab Server from different languages"><span class="none"></span>Using BlackLab Server from different languages</a></li>
    <li><a href="indexing-with-blacklab.html" title="Indexing with BlackLab"><span class="none"></span>Indexing with BlackLab</a></li>
    <li><a href="add-input-format.html" title="Add An Input Format"><span class="none"></span>Add An Input Format</a></li>
    <li><a href="improve-search-speed.html" title="Improve Search Speed"><span class="none"></span>Improve Search Speed</a></li>
    <li><a href="apidocs/index.html" title="API reference"><span class="none"></span>API reference</a></li>
    <li><a href="file-formats.html" title="File formats"><span class="none"></span>File formats</a></li>
    </ul>
</li>
    <li><a href="downloads.html" title="Downloads"><span class="none"></span>Downloads</a></li>
    <li class="active"><a href="#"><span class="none"></span>FAQ</a></li>
    <li><a href="changelog.html" title="Change Log"><span class="none"></span>Change Log</a></li>
    <li><a href="roadmap.html" title="Road Map"><span class="none"></span>Road Map</a></li>
    <li><a href="newsletter.html" title="Newsletter"><span class="none"></span>Newsletter</a></li>
      <li class="nav-header">Project Documentation</li>
    <li><a href="project-info.html" title="Project Information"><span class="icon-chevron-right"></span>Project Information</a></li>
    <li><a href="project-reports.html" title="Project Reports"><span class="icon-chevron-right"></span>Project Reports</a></li>
</ul>
          <hr />
          <div id="poweredBy">
            <div class="clear"></div>
            <div class="clear"></div>
            <div class="clear"></div>
            <div class="clear"></div>
<a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy"><img class="builtBy" alt="Built by Maven" src="./images/logos/maven-feather.png" /></a>
            </div>
          </div>
        </div>
        <div id="bodyColumn"  class="span10" >
<h1>Frequently Asked Questions</h1>
<div class="section">
<h2><a name="Who_is_BlackLab_for.3F"></a>Who is BlackLab for?</h2>
<p>BlackLab is a good choice if you want to search a large body of text annotated with extra information per word (e.g. lemma, part of speech, or any number of additional layers). It adds a number of search features to Lucene.</p>
<p>With BlackLab, you can search for complex patterns of words (e.g. &#x201c;find all nouns preceded by two or three adjectives&#x201d;). It can accurately highlight matches (not just simple terms) in the original document or show them in a keyword-in-context (KWIC) view. It can quickly sort or group large result sets based on several criteria, including the exact words matched or words surrounding the match. It can also search inside specific XML tags, so you can search for people or places, for example.</p>
<p>BlackLab supports <a href="indexing-with-blacklab.html#supported-formats">a number of input formats</a> out of the box. Adding support for a new input format <a href="how-to-configure-indexing.html">is easy</a>.</p></div>
<div class="section">
<h2><a name="Who_uses_BlackLab.3F"></a>Who uses BlackLab?</h2>
<p>See <a href="who-uses-blacklab.html">Who uses BlackLab?</a>.</p></div>
<div class="section">
<h2><a name="Is_BlackLab_easy_to_use.3F"></a>Is BlackLab easy to use?</h2>
<p>Yes, ease of use is an important design goal of BlackLab. This goes for both the Java library (BlackLab Core) and the webservice (BlackLab Server).</p>
<p>The simplest program using the Java library is 3 lines long: open a BlackLab index, execute a query, and close the index again. Of course, you might want to iterate over the results and display them, so a real-world program will be longer.</p>
<p>Queries can be supplied in many different forms, depending on what you&#x2019;re familiar with:</p>
<ul>

<li><a href="corpus-query-language.html">Corpus Query Language</a>, as used by the Sketch Engine and IMS Corpus WorkBench;</li>
<li><a class="externalLink" href="http://www.loc.gov/standards/sru/specs/cql.html">Contextual Query Language</a> (EXPERIMENTAL), used by many online information retrieval systems;</li>
<li>or if you prefer, you can programmatically construct queries out of objects, so you can add your own query languages, offer a GUI query builder, etc.</li>
</ul>
<p>See <a href="getting-started.html">Getting started</a> to get your feet wet with BlackLab. See the <a href="apidocs/">reference documentation</a> for a detailed overview of the Java library, or <a href="blacklab-server-overview.html">BlackLab Server overview</a> for more information about the webservice.</p>
<p>If you have questions, contact us (see below)!</p></div>
<div class="section">
<h2><a name="Why_can.E2.80.99t_BlackLab_index_my_TEI_.28or_other_format.29.3F"></a>Why can&#x2019;t BlackLab index my TEI (or other format)?</h2>
<p>BlackLab needs tokenized input files. This means the word boundaries have already been determined so BlackLab can just index words as it parses the file.</p>
<p>In addition to this, the default TEI configuration (<a class="externalLink" href="https://github.com/INL/BlackLab/blob/master/core/src/main/resources/formats/tei.blf.yaml">tei.blf.yaml</a>) may not be suitable for your particular TEI documents. You can derive your own custom configuration from the default one to fix this. See <a href="how-to-configure-indexing.html">how to configure indexing</a>.</p></div>
<div class="section">
<h2><a name="Why_is_BlackLab_slow_.2F_running_out_of_memory_.2F_using_100.25_CPU.3F"></a>Why is BlackLab slow / running out of memory / using 100% CPU?</h2>
<p>Usually this is related to the Java heap size. Make sure <a class="externalLink" href="http://crunchify.com/how-to-change-jvm-heap-setting-xms-xmx-of-tomcat/">the JVM has enough heap space</a>. If heap memory is low and/or fragmented, the JVM garbage collector might start taking 100% CPU moving objects in order to recover enough free space, slowing things down to a crawl.</p>
<p>If that doesn&#x2019;t help, you might be trying to index a very large corpus with a unique id for each word, for example. BlackLab was designed to index word, lemma, part of speech and such, which all have a limited number of unique values. If you wish to index a unique id annotation for each word, you could <a href="how-to-configure-indexing.html#disable-fi">disable the forward index</a> to save memory and disk space.</p>
<p>Sometimes, certain advanced queries may be slow as well. You can experiment with writing the same query in a slightly different way and see if that helps. If not, let us know.</p></div>
<div class="section">
<h2><a name="Why_can.E2.80.99t_I_view_whole_documents.3F"></a>Why can&#x2019;t I view whole documents?</h2>
<p>You may be getting &#x201c;permission denied&#x201d; or such when trying to view a whole document in corpus-frontend or via BlackLab Server. This is due to the <tt>contentViewable</tt> setting.</p>
<p>@@@ TODO</p></div>
<div class="section">
<h2><a name="Can_I_use_BlackLab_with_Solr.2FElasticSearch.3F"></a>Can I use BlackLab with Solr/ElasticSearch?</h2>
<p>Solr/ElasticSearch integration is high on our <a href="roadmap.html">wishlist</a>, but BlackLab started as a Java library using Lucene directly, and some changes are required to get it to integrate with Solr and/or ElasticSearch. We know the steps required, it&#x2019;s just a question of finding the time.</p>
<p>If you&#x2019;re using Solr/ElasticSearch and are interested in taking advantage of the features that BlackLab provides, drop us a line (see below). We&#x2019;d love to collaborate on this.</p></div>
<div class="section">
<h2><a name="Is_BlackLab_fast.3F"></a>Is BlackLab fast?</h2>
<p>We&#x2019;ve done our best the features we&#x2019;ve added don&#x2019;t compromise Lucene&#x2019;s impressive search speed. Of course, search and index speed varies based on machine and disk speed and available memory, but here are a few examples, from on a reasonably fast machine with 32GB RAM.</p>
<div class="section">
<h3><a name="Search_speed"></a>Search speed</h3>
<p>Here&#x2019;s a rough indication of current search performance in a corpus with 450M words:</p>
<ul>

<li>Most queries will yield the first batch of results in under a second, even when there&#x2019;s hundreds of thousands of matches. Some types of wildcard queries take a few seconds longer.</li>
<li>Sorting a resultset of 100K matches by document title or date takes about 2 seconds.</li>
<li>Sorting the same resultset by the words occurring to the right of the match takes about 4 seconds.</li>
<li>Grouping a resultset of 800K matches of a wildcard query on matched text (to see how often different words were matched) takes about 8 seconds.</li>
</ul>
<p>Note that search performance is heavily reliant on disk caching (all the forward indices must be in OS cache to achieve maximum search, sort and group performance), so make sure you have plenty of memory.</p></div>
<div class="section">
<h3><a name="Index_speed"></a>Index speed</h3>
<p>In addition to the factors mentioned above, indexing speed also depends on the input format used. Here&#x2019;s two examples:</p>
<ul>

<li>The 450M word data set mentioned (consisting of OCR&#x2019;ed text pages) was indexed in around 6 hours (around 20,000 words/sec)</li>
<li>A 100M word data set in a more compact input format (word-per-line), including headword and part-of-speech tagging, was indexed in under an hour (around 30,000 words/sec; )</li>
</ul></div></div>
<div class="section">
<h2><a name="Other_corpus_engines_exist.3B_why_did_you_develop_BlackLab.3F"></a>Other corpus engines exist; why did you develop BlackLab?</h2>
<p>At the Dutch Language Institute, we use all kinds of corpora in all kinds of projects, and we needed a flexible solution for these corpora and projects and their specific requirements.</p>
<p>We designed BlackLab to offer the flexibility that we missed in other corpus engines at the time:</p>
<ul>

<li>doesn&#x2019;t prescribe a fixed input format, but can work with any data you want to throw at it</li>
<li>provides solid support for Corpus Query Language, but you can easily add query languages. We&#x2019;ve added basic support for SRU/CQL (Contextual Query Language), for example, and may add other query languages (e.g. treebanks-search related) in the future.</li>
<li>has a modular design, making it easier to extend and maintain</li>
<li>includes the ability to customize and fundamental indexing features, such as future support for searching tree-like structures, such as syntactic and semantic relations.</li>
<li>continually benefits from developments to Lucene, Solr and ElasticSearch, making it more future-proof and lowering development cost</li>
<li>is trivial to use from other programming languages when desired, but also perfectly integrates with the Java ecosystem many of our products are built on</li>
</ul></div>
<div class="section">
<h2><a name="Future_plans"></a>Future plans</h2>
<p>We intend to keep improving BlackLab. For an overview of our future plans, check the <a href="roadmap.html">Road map</a>.</p></div>
<div class="section">
<h2><a name="More_questions.3F"></a>More questions?</h2>
<p>For technical questions about BlackLab, contact <a class="externalLink" href="mailto:jan.niestadt@ivdnt.org">Jan Niestadt</a>. I&#x2019;m always happy to hear from you.</p></div>
        </div>
      </div>
    </div>
    <hr/>
    <footer>
      <div class="container-fluid">
        <div class="row-fluid">
            <p>Copyright &copy;2021
<a href="https://www.ivdnt.org/">Instituut voor Nederlandse Taal (INT)</a>.
All rights reserved.</p>
        </div>
      </div>
    </footer>
  </body>
</html>
