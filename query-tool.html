<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia Site Renderer 1.8.1 from src/site/markdown/query-tool.md at 2021-08-26
 | Rendered using Apache Maven Fluido Skin 1.7
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="Date-Revision-yyyymmdd" content="20210826" />
    <meta http-equiv="Content-Language" content="en" />
    <title>BlackLab Core &#x2013; Using the query tool</title>
    <link rel="stylesheet" href="./css/apache-maven-fluido-1.7.min.css" />
    <link rel="stylesheet" href="./css/site.css" />
    <link rel="stylesheet" href="./css/print.css" media="print" />
    <script type="text/javascript" src="./js/apache-maven-fluido-1.7.min.js"></script>
<link href='http://fonts.googleapis.com/css?family=Nunito:300' rel='stylesheet' type='text/css' />
  </head>
  <body class="topBarDisabled">
    <div class="container-fluid">
      <div id="banner">
        <div class="pull-left"><a href="http://www.ivdnt.org/" id="bannerLeft"><img src="images/logo_2_ivd-nt_transparant.png"  alt="Dutch Language Institute (INT)"/></a></div>
        <div class="pull-right"><a href="BlackLab/" id="bannerRight"><img src="images/logo-blacklab.png"  alt="BlackLab"/></a></div>
        <div class="clear"><hr/></div>
      </div>

      <div id="breadcrumbs">
        <ul class="breadcrumb">
      <li class=""><a href="http://www.ivdnt.org/" class="externalLink" title="INT">INT</a><span class="divider">/</span></li>
      <li class=""><a href="index.html" title="BlackLab">BlackLab</a><span class="divider">/</span></li>
    <li class="active ">Using the query tool</li>
        <li id="publishDate" class="pull-right"><span class="divider">|</span> Last Published: 2021-08-26</li>
          <li id="projectVersion" class="pull-right">Version: 2.2.0-SNAPSHOT</li>
        </ul>
      </div>
      <div class="row-fluid">
        <div id="leftColumn" class="span2">
          <div class="well sidebar-nav">
    <ul class="nav nav-list">
      <li class="nav-header">BlackLab</li>
    <li><a href="index.html" title="Introduction"><span class="none"></span>Introduction</a></li>
    <li><a href="learn.html" title="Learn"><span class="icon-chevron-down"></span>Learn</a>
    <ul class="nav nav-list">
    <li><a href="getting-started.html" title="Getting Started"><span class="none"></span>Getting Started</a></li>
    <li><a href="corpus-query-language.html" title="Corpus Query Language"><span class="none"></span>Corpus Query Language</a></li>
    <li><a href="blacklab-server-overview.html" title="BlackLab Server overview"><span class="none"></span>BlackLab Server overview</a></li>
    <li><a href="configuration-files.html" title="Configuration files"><span class="none"></span>Configuration files</a></li>
    <li><a href="blacklab-server-different-languages.html" title="Using BlackLab Server from different languages"><span class="none"></span>Using BlackLab Server from different languages</a></li>
    <li><a href="indexing-with-blacklab.html" title="Indexing with BlackLab"><span class="none"></span>Indexing with BlackLab</a></li>
    <li><a href="add-input-format.html" title="Add An Input Format"><span class="none"></span>Add An Input Format</a></li>
    <li><a href="improve-search-speed.html" title="Improve Search Speed"><span class="none"></span>Improve Search Speed</a></li>
    <li><a href="apidocs/index.html" title="API reference"><span class="none"></span>API reference</a></li>
    <li><a href="file-formats.html" title="File formats"><span class="none"></span>File formats</a></li>
    </ul>
</li>
    <li><a href="downloads.html" title="Downloads"><span class="none"></span>Downloads</a></li>
    <li><a href="faq.html" title="FAQ"><span class="none"></span>FAQ</a></li>
    <li><a href="changelog.html" title="Change Log"><span class="none"></span>Change Log</a></li>
    <li><a href="roadmap.html" title="Road Map"><span class="none"></span>Road Map</a></li>
    <li><a href="newsletter.html" title="Newsletter"><span class="none"></span>Newsletter</a></li>
      <li class="nav-header">Project Documentation</li>
    <li><a href="project-info.html" title="Project Information"><span class="icon-chevron-right"></span>Project Information</a></li>
    <li><a href="project-reports.html" title="Project Reports"><span class="icon-chevron-right"></span>Project Reports</a></li>
</ul>
          <hr />
          <div id="poweredBy">
            <div class="clear"></div>
            <div class="clear"></div>
            <div class="clear"></div>
            <div class="clear"></div>
<a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy"><img class="builtBy" alt="Built by Maven" src="./images/logos/maven-feather.png" /></a>
            </div>
          </div>
        </div>
        <div id="bodyColumn"  class="span10" >
<h1>Using the query tool</h1>
<div class="section">
<h2><a name="About_the_query_tool"></a>About the query tool</h2>
<p>The BlackLab query tool is a simple command-driven search tool that provides a demonstration of the querying features of BlackLab. It allows you to search an index using different query languages:</p>
<ul>

<li>The <a href="corpus-query-language.html">Corpus Query Language</a>, aimed at finding linguistic patterns in large text corpora. This was developed at the University of Stuttgard for the IMS Corpus Workbench (CWB) and is used in other corpus search systems as well, notably the Lexicom Sketch Engine.</li>
<li>Lucene Query Language, the query parser supplied with Lucene. A <a class="externalLink" href="http://lucene.apache.org/core/2_9_4/queryparsersyntax.html" title="http://lucene.apache.org/core/2_9_4/queryparsersyntax.html">familiar syntax</a> for including/excluding terms, similar to how many search engines operate.</li>
<li>The Contextual Query Language (SRU CQL) (EXPERIMENTAL), a <a class="externalLink" href="http://zing.z3950.org/cql/intro.html" title="http://zing.z3950.org/cql/intro.html">query language</a> used by libraries around the world.</li>
</ul>
<p>Note that not all features of each query language are supported yet, but the basics are.</p></div>
<div class="section">
<h2><a name="Starting_the_QueryTool"></a>Starting the QueryTool</h2>
<p>You can start QueryTool to search your own data set by running it from the commandline. To learn how to quickly index and search a corpus, see <a href="/Building_and_testing_BlackLab" title="Building and testing BlackLab">Building and testing BlackLab</a>.</p></div>
<div class="section">
<h2><a name="Paging.2C_sorting_and_grouping"></a>Paging, sorting and grouping</h2>
<p>As a first query, type &#x201c;de&#x201d; (the) and press Enter. The first twenty hits for this query are shown. To page through the results, use the commands &#x201c;next&#x201d; and &#x201c;previous&#x201d; (or their one-letter abbreviations). You can also change the number of hits displayed per page by using the &#x201c;pagesize&#x201d; command followed by a number.</p>
<p>You can sort the hits using the command &#x201c;sort &lt;criterium&gt;&#x201d;. The criterium can be &#x201c;match&#x201d;, &#x201c;left&#x201d; or &#x201c;right&#x201d;. &#x201c;match&#x201d; sorts by matched text, &#x201c;left&#x201d; sorts by left context (the text to the left of the matched text), and &#x201c;right&#x201d; sorts by right context. You can also specify a property to sort on, e.g. word, lemma, or pos. If you don&#x2019;t specify this, hits will be sorted by word.</p>
<p>You can group the hits using &#x201c;group &lt;criterium&gt;&#x201d;. Valid values are again &#x201c;match&#x201d;, &#x201c;left&#x201d; or &#x201c;right&#x201d;. Here, &#x201c;left&#x201d; and &#x201c;right&#x201d; group on the single word occurring to the left or right of the matched text. Just like sort, you can optionally specify a property (word, lemma, pos) to group on. Word is the default.</p>
<p>Once you group hits, you enter group mode. The groups are displayed in columns: group number, group size and group identity. If there are many groups, you can page through the groups using the same command as for hits. You can also sort the groups by &#x201c;identity&#x201d; or &#x201c;size&#x201d;.</p>
<p>To examine the hits in a group, enter &#x201c;group n&#x201d;, where n is the group number displayed at the beginning of the line (the second number is the group size). To leave group mode and go back to showing all hits, enter &#x201c;hits&#x201d;. To get back to group mode, enter &#x201c;groups&#x201d;.</p></div>
<div class="section">
<h2><a name="Corpus_Query_Language"></a>Corpus Query Language</h2>
<p>The demo starts out in Corpus Query Language mode, which is the most powerful of the supported languages. The Corpus Query Language expresses queries as sequences of token queries. It is therefore mainly useful to find specific types of phrases in a larger text.</p>
<p>An example of a simple query (note that the quotes are required):</p>

<div>
<div>
<pre class="source">&quot;de&quot; &quot;sta.\*&quot;
</pre></div></div>

<p>This searches for the word &#x201c;de&#x201d; followed by a word starting with &#x201c;sta&#x201d;. As you can see, regular expressions can be used to build token queries.</p>
<p>Equivalent to the above query is:</p>

<div>
<div>
<pre class="source">[word=&quot;de&quot;] [word=&quot;sta.\*&quot;]
</pre></div></div>

<p>In addition to using regular expressions to express single-token restrictions, a similar notation can be used to express restrictions on sequences of tokens. For example:</p>

<div>
<div>
<pre class="source">&quot;der.\*&quot;{2,}
</pre></div></div>

<p>This query finds two or more successive words starting with &#x201c;der&#x201d;. You can also use the regular expression operators such as *, + and ? to build multi-token regular expressions:</p>

<div>
<div>
<pre class="source">&quot;in&quot; &quot;de&quot;? &quot;gang&quot; &quot;g.\*&quot;
</pre></div></div>

<p>If your corpus is tagged with headword and part of speech (the supplied test set is), you can search for these features as well:</p>

<div>
<div>
<pre class="source">[hw=&quot;zijn&quot;] [hw=&quot;blijven&quot;]
</pre></div></div>

<p>This find forms of these verbs (&#x201c;to be&#x201d; and &#x201c;to stay&#x201d;) occurring together.</p>

<div>
<div>
<pre class="source">[pos=&quot;a.\*&quot;]+ &quot;man&quot;
</pre></div></div>

<p>This finds the word &#x201c;man&#x201d; with one or more adjectives applied to it.</p></div>
<div class="section">
<h2><a name="QueryTool_reference"></a>QueryTool reference</h2>
<div class="section">
<h3><a name="CorpusQL_examples"></a>CorpusQL examples</h3>
<p>Find words starting with &#x201c;sta&#x201d;:</p>

<div>
<div>
<pre class="source">&quot;sta.\*&quot;
</pre></div></div>

<p>Find &#x201c;man&#x201d; preceded by at least 2 adjectives:</p>

<div>
<div>
<pre class="source">[type=&quot;a.\*&quot;]{2,} &quot;man&quot;
</pre></div></div>

<p>Find &#x201c;stad&#x201d; and &#x201c;dorp&#x201d; with one word in between:</p>

<div>
<div>
<pre class="source">&quot;stad&quot; [] &quot;dorp&quot;
</pre></div></div>

<p>Find &#x201c;stad&#x201d; and &#x201c;dorp&#x201d; with 2-10 words in between:</p>

<div>
<div>
<pre class="source">&quot;stad&quot; []{2,10} &quot;dorp&quot;
</pre></div></div>

<p>Find all words:</p>

<div>
<div>
<pre class="source">[]
</pre></div></div>

<p>Find all bigrams:</p>

<div>
<div>
<pre class="source">[] []
[]{2}
</pre></div></div>

<p>&#x201c;de&#x201d; at the start of a named entity:</p>

<div>
<div>
<pre class="source">&lt;ne\&gt; &quot;de&quot;
</pre></div></div>

<p>&#x201c;poorter&#x201d; at the end of a named entity:</p>

<div>
<div>
<pre class="source">&quot;poorter&quot; &lt;/ne\&gt;
</pre></div></div>

<p>Named entities containing &#x201c;de&#x201d;:</p>

<div>
<div>
<pre class="source">&lt;ne/\&gt; containing &quot;de&quot;
</pre></div></div>

<p>&#x201c;de&#x201d; within a named entity:</p>

<div>
<div>
<pre class="source">&quot;de&quot; within &lt;ne/\&gt;
</pre></div></div>

<p>All named entities:</p>

<div>
<div>
<pre class="source">&lt;ne/\&gt;
</pre></div></div>

<p>All persons:</p>

<div>
<div>
<pre class="source">&lt;ne type=&quot;per&quot;/\&gt;
</pre></div></div>

<p>Person names containing &#x201c;van&#x201d;:</p>

<div>
<div>
<pre class="source">&lt;ne type=&quot;per&quot;/\&gt; containing &quot;van&quot;
</pre></div></div>

<p>Locations starting with &#x201c;de&#x201d;:</p>

<div>
<div>
<pre class="source">&lt;ne type=&quot;loc&quot; /\&gt; containing &lt;ne\&gt; &quot;de&quot;
</pre></div></div>
</div>
<div class="section">
<h3><a name="Other_commands"></a>Other commands</h3>
<p>Grouping</p>

<div>
<div>
<pre class="source">group match
group match lemma
group match pos
</pre></div></div>

<p>Sorting</p>

<div>
<div>
<pre class="source">sort left
sort right lemma
</pre></div></div>

<p>Paging through results:</p>

<div>
<div>
<pre class="source">n(ext)
p(revious)
</pre></div></div>

<p>Change context size (number of words around hit):</p>

<div>
<div>
<pre class="source">context 3
context 10
</pre></div></div>

<p>Show document title in KWIC view:</p>

<div>
<div>
<pre class="source">doctitle on
doctitle off
</pre></div></div>

<p>Case/diacritics-sensitivity:</p>

<div>
<div>
<pre class="source">sensitive on
sensitive off
</pre></div></div>

<p>Filter on metadata (uses Lucene query syntax):</p>

<div>
<div>
<pre class="source">filter title.level1:&quot;courant&quot;
filter author.level1:&quot;jansen&quot;
filter author.level1:&quot;sterkenburg&quot; author.level2:&quot;sterkenburg&quot;
filter (Filter weer leegmaken)
</pre></div></div>

<p>Show index structure:</p>

<div>
<div>
<pre class="source">struct
structure
</pre></div></div>
</div>
<div class="section">
<h3><a name="Commandline_editing"></a>Commandline editing</h3>
<p>Commandline editing is available if the <a class="externalLink" href="http://jline.sourceforge.net/">JLine</a> JAR is found on the classpath.</p></div></div>
        </div>
      </div>
    </div>
    <hr/>
    <footer>
      <div class="container-fluid">
        <div class="row-fluid">
            <p>Copyright &copy;2021
<a href="https://www.ivdnt.org/">Instituut voor Nederlandse Taal (INT)</a>.
All rights reserved.</p>
        </div>
      </div>
    </footer>
  </body>
</html>
